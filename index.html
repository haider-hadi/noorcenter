<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NOOR CENTER | Premium Shopping</title>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <style>
    :root{
      --gold: #d4af37;
      --dark: #1a1a1a;
      --white: #ffffff;
      --grey: #f4f4f4;
      --shadow: 0 4px 15px rgba(0,0,0,0.08);
      --radius: 10px;
    }

    *{ box-sizing: border-box; margin:0; padding:0; }

    body{
      font-family: 'Poppins', sans-serif;
      background: var(--grey);
      color: var(--dark);
      overflow-x: hidden;
    }

    /* NAVBAR */
    nav{
      background: var(--dark);
      padding: 15px 5%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
    }
    .logo{
      color: var(--gold);
      font-size: 24px;
      font-weight: bold;
      letter-spacing: 2px;
      cursor: pointer;
    }

    .nav-links{
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .nav-links a{
      color: white;
      text-decoration: none;
      font-size: 14px;
      cursor: pointer;
      transition: 0.3s;
    }
    .nav-links a:hover{
      color: var(--gold);
    }

    /* Hamburger */
    .hamburger{
      display: none;
      flex-direction: column;
      gap: 4px;
      cursor: pointer;
      z-index: 1001;
    }
    .hamburger span{
      width: 25px;
      height: 3px;
      background: white;
      border-radius: 3px;
      transition: 0.3s;
    }
    .hamburger.active span:nth-child(1){
      transform: translateY(7px) rotate(45deg);
    }
    .hamburger.active span:nth-child(2){
      opacity: 0;
    }
    .hamburger.active span:nth-child(3){
      transform: translateY(-7px) rotate(-45deg);
    }

    /* MOBILE MENU */
    .mobile-menu{
      display: none;
      flex-direction: column;
      background: var(--dark);
      padding: 10px 5%;
      position: fixed;
      top: 60px;
      width: 100%;
      left: 0;
      z-index: 999;
      box-shadow: 0 5px 20px rgba(0,0,0,0.5);
      border-top: 1px solid rgba(255,255,255,0.1);
    }
    .mobile-menu a{
      padding: 12px 0;
      color: white;
      text-decoration: none;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      font-size: 16px;
    }
    .mobile-menu a:hover{
      color: var(--gold);
    }

    /* PAGE SYSTEM */
    .page{
      display: none;
      min-height: 90vh;
      animation: fadeIn 0.4s ease;
    }
    .page.active{ display:block; }
    @keyframes fadeIn{
      from{ opacity: 0; }
      to{ opacity: 1; }
    }

    /* HERO */
    .hero{
      height: 60vh;
      background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)),
        url('https://images.unsplash.com/photo-1441984904996-e0b6ba687e04?auto=format&fit=crop&w=1200');
      background-size: cover;
      background-position: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: white;
      text-align: center;
    }
    .hero h1{
      font-size: 3.5rem;
      margin-bottom: 10px;
      letter-spacing: 3px;
      text-shadow: 0 2px 10px rgba(0,0,0,0.5);
    }

    /* CONTAINER */
    .container{
      max-width: 1200px;
      margin: auto;
      padding: 40px 20px;
    }

    /* GRID */
    .grid{
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 25px;
    }

    /* CARD */
    .card{
      background: white;
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: var(--shadow);
      transition: 0.3s;
      border: 1px solid #eee;
      display: flex;
      flex-direction: column;
    }
    .card:hover{
      transform: translateY(-5px);
      border-color: var(--gold);
    }
    .card img{
      width: 100%;
      height: 280px;
      object-fit: cover;
      cursor: pointer;
    }
    .card-body{
      padding: 15px;
      text-align: center;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .card h3{
      margin: 10px 0;
    }

    /* BUTTON */
    .btn{
      background: var(--dark);
      color: white;
      border: none;
      padding: 12px 20px;
      cursor: pointer;
      width: 100%;
      font-weight: 600;
      transition: 0.3s;
      border-radius: 4px;
    }
    .btn:hover{
      background: var(--gold);
      color: var(--dark);
    }

    /* FILTER BAR */
    .filter-bar{
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      margin-bottom: 20px;
      justify-content: space-between;
      align-items: center;
    }
    .filter-bar input{
      width: 200px;
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #ddd;
    }

    /* PRODUCT DETAILS */
    .detail-grid{
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 40px;
    }

    /* FORM */
    input, textarea, select{
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border-radius: 6px;
      border: 1px solid #ddd;
      outline: none;
    }
    input:focus, textarea:focus, select:focus{
      border-color: var(--gold);
      box-shadow: 0 0 0 3px rgba(212,175,55,0.2);
    }

    /* CART ITEMS */
    .cart-item{
      display:flex;
      justify-content:space-between;
      align-items:center;
      background:white;
      padding:15px;
      margin-bottom:10px;
      border-radius:5px;
    }
    .cart-item img{ width: 60px; }

    /* CHECKOUT */
    .checkout-card{
      background:white;
      padding: 25px;
      border-radius: 10px;
      box-shadow: var(--shadow);
    }

    /* TABLE */
    table{
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      background: white;
    }
    th, td{
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }

    /* FOOTER */
    footer{
      background: var(--dark);
      color: white;
      text-align: center;
      padding: 40px 0;
      margin-top: 50px;
    }

    /* RESPONSIVE */
    @media (max-width: 768px){
      .hero h1{ font-size: 2.5rem; }

      /* show hamburger */
      .nav-links{ display:none; }
      .hamburger{ display:flex; }

      .container{ padding: 30px 15px; }
      .grid{ gap: 18px; }
      .card img{ height: 220px; }
    }

    @media (max-width: 480px){
      .hero{ height: 50vh; }
      .card img{ height: 200px; }
      .btn{ padding: 12px; }
    }
  </style>
</head>

<body>

<nav>
  <div class="logo" onclick="showPage('home')">NOOR CENTER</div>

  <!-- Desktop Links -->
  <div class="nav-links">
    <a onclick="showPage('home')">Home</a>
    <a onclick="showPage('shop')">Shop</a>
    <a href="about.html">About</a>
    <a href="contact.html">Contact</a>
    <a onclick="showPage('cart')" id="cart-count">üõí Cart (0)</a>
  </div>

  <!-- Hamburger -->
  <div class="hamburger" onclick="toggleMenu()">
    <span></span>
    <span></span>
    <span></span>
  </div>
</nav>

<!-- Mobile Menu -->
<div class="mobile-menu" id="mobileMenu">
  <a onclick="showPage('home'); toggleMenu()">Home</a>
  <a onclick="showPage('shop'); toggleMenu()">Shop</a>
  <a href="about.html">About</a>
  <a href="contact.html">Contact</a>
  <a onclick="showPage('cart'); toggleMenu()" id="mobileCart">üõí Cart (0)</a>
</div>

<!-- PAGES -->
<section id="home" class="page active">
  <div class="hero">
    <h1>NOOR CENTER</h1>
    <button class="btn" style="width:auto; padding: 15px 40px;" onclick="showPage('shop')">SHOP NOW</button>
  </div>

  <div class="container">
    <h2 style="text-align:center">Explore Categories</h2>
    <div class="grid">
      <div class="card" onclick="loadShopByCategory('Men')">
        <img src="https://images.unsplash.com/photo-1490578474895-699cd4e2cf59?w=400">
        <div class="card-body"><h3>Men</h3></div>
      </div>
      <div class="card" onclick="loadShopByCategory('Women')">
        <img src="https://images.unsplash.com/photo-1503342217505-b0a15ec3261c?w=400">
        <div class="card-body"><h3>Women</h3></div>
      </div>
      <div class="card" onclick="loadShopByCategory('Kids')">
        <img src="https://images.unsplash.com/photo-1519452635265-7b1fbfd1e4e0?w=400">
        <div class="card-body"><h3>Kids</h3></div>
      </div>
      <div class="card" onclick="loadShopByCategory('Jewelry')">
        <img src="https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?w=400">
        <div class="card-body"><h3>Jewelry</h3></div>
      </div>
    </div>
  </div>
</section>

<section id="shop" class="page">
  <div class="container">
    <div class="filter-bar">
      <h2 id="shop-title">All Products</h2>

      <!-- Search + Filter -->
      <input id="searchInput" type="text" placeholder="Search product..." oninput="applyFilters()">
      <input id="minPrice" type="number" placeholder="Min price" oninput="applyFilters()">
      <input id="maxPrice" type="number" placeholder="Max price" oninput="applyFilters()">

      <select style="width: 220px; padding: 10px;" onchange="loadShopByCategory(this.value)">
        <option value="All">All Categories</option>
        <option value="Men">Men</option>
        <option value="Women">Women</option>
        <option value="Kids">Kids</option>
        <option value="Jewelry">Jewelry</option>
      </select>
    </div>

    <div id="product-list" class="grid"></div>
  </div>
</section>

<section id="product-details" class="page">
  <div class="container">
    <button class="btn" style="width:auto; margin-bottom: 20px;" onclick="showPage('shop')">‚Üê Back to Shop</button>
    <div id="detail-content"></div>
  </div>
</section>

<section id="cart" class="page">
  <div class="container" style="max-width: 800px;">
    <h2>Your Shopping Cart</h2>
    <div id="cart-items-list"></div>
    <div style="text-align:right; margin-top: 20px;">
      <h3 id="cart-total">Total: RS. 0</h3>
      <button class="btn" style="width: 200px;" onclick="showPage('checkout')">Proceed to Checkout</button>
    </div>
  </div>
</section>

<section id="checkout" class="page">
  <div class="container" style="max-width: 600px;">
    <div class="checkout-card">
      <h2>Order Details</h2>
      <input type="text" id="custName" placeholder="Full Name">
      <input type="text" id="custPhone" placeholder="Phone Number">
      <textarea id="custAddr" placeholder="Shipping Address" rows="4"></textarea>
      <p>Payment Method: <b>Cash on Delivery</b></p>
      <button class="btn" onclick="placeOrder()">Place Order</button>
    </div>
  </div>
</section>

<section id="about" class="page">
  <div class="hero" style="height: 300px;"><h1>About NOOR CENTER</h1></div>
  <div class="container" style="text-align:center;">
    <p>Premium lifestyle and fashion destination in Kabirwala.</p>
  </div>
</section>

<section id="contact" class="page">
  <div class="container grid">
    <div>
      <h2>Contact Us</h2>
      <p><b>Address:</b> Sarai Sidhu Road, Kabirwala</p>
      <p><b>Support:</b> support@noorcenter.com</p>
    </div>
    <div>
      <input type="text" placeholder="Name">
      <input type="email" placeholder="Email">
      <textarea placeholder="Message" rows="4"></textarea>
      <button class="btn">Send Message</button>
    </div>
  </div>
</section>

<section id="admin-login" class="page">
  <div class="container" style="max-width: 400px; text-align:center;">
    <h2>Admin Login</h2>
    <input type="text" id="admUser" placeholder="Username">
    <input type="password" id="admPass" placeholder="Password">
    <button class="btn" onclick="adminLogin()">Login</button>
  </div>
</section>

<section id="admin-dash" class="page">
  <div class="container">
    <div style="display:flex; justify-content: space-between; align-items:center;">
      <h2>Admin Dashboard</h2>
      <button onclick="showPage('home')" class="btn" style="width: 100px;">Logout</button>
    </div>

    <div style="background:white; padding:20px; border-radius:8px;">
      <h3>Add New Product</h3>
      <div class="grid" style="grid-template-columns: 1fr 1fr;">
        <input type="text" id="pId" placeholder="Internal ID">
        <input type="text" id="pName" placeholder="Product Name">
        <input type="number" id="pPrice" placeholder="Price">
        <select id="pCat">
          <option>Men</option>
          <option>Women</option>
          <option>Kids</option>
          <option>Jewelry</option>
        </select>
        <input type="file" id="pImage">
      </div>
      <button class="btn" onclick="uploadProduct()" style="margin-top:10px;">Add Product</button>
    </div>

    <div id="admin-product-list"></div>
  </div>
</section>

<footer>
  <p>&copy; 2026 NOOR CENTER | Premium Boutique</p>
</footer>

<script>
  const SUPABASE_URL = 'https://lqcdfysynegysckwzkwc.supabase.co';
  const SUPABASE_ANON_KEY = 'sb_publishable_m_sUuDgmsI3_MRWRxVBxWg__aVu_0hj';
  const PRODUCT_BUCKET = 'product-images';
  const _supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  let cart = JSON.parse(localStorage.getItem('noor_cart')) || [];
  let productsData = [];

  function showPage(pageId){
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById(pageId).classList.add('active');
    window.scrollTo(0,0);

    if(pageId === 'shop' && !window.selectedCategory){
      loadShopByCategory('All');
    }

    if(pageId === 'cart') renderCart();
    if(pageId === 'admin-dash') loadAdminProducts();
    updateCartUI();
  }

  function toggleMenu(){
    const menu = document.getElementById('mobileMenu');
    const ham = document.querySelector('.hamburger');
    menu.style.display = menu.style.display === 'flex' ? 'none' : 'flex';
    ham.classList.toggle('active');
  }

  async function loadShopByCategory(cat){
    window.selectedCategory = cat;
    showPage('shop');

    const container = document.getElementById('product-list');
    container.innerHTML = "<p>Loading products...</p>";

    document.getElementById('shop-title').innerText =
      cat === 'All' ? 'All Products' : cat + " Collection";

    let query = _supabase.from('products').select('*');
    if(cat !== 'All') query = query.eq('category', cat);

    const { data, error } = await query;
    if(error){
      container.innerHTML = "<p>Error loading products</p>";
      return;
    }

    if(!data.length){
      container.innerHTML = "<p>No products found.</p>";
      return;
    }

    productsData = data;
    renderProducts(productsData);
  }

  function renderProducts(data){
    const container = document.getElementById('product-list');
    container.innerHTML = data.map(p => `
      <div class="card">
        <img src="${SUPABASE_URL}/storage/v1/object/public/${PRODUCT_BUCKET}/${p.image_path}" onclick="showDetails('${p.id}')">
        <div class="card-body">
          <h4 onclick="showDetails('${p.id}')">${p.name}</h4>
          <p style="color:var(--gold); font-weight:bold;">RS. ${p.price}</p>
          <button class="btn" onclick="addToCart('${p.id}', '${p.name}', ${p.price}, '${p.image_path}')">
            Add to Cart
          </button>
        </div>
      </div>
    `).join('');
  }

  function applyFilters(){
    const search = document.getElementById('searchInput').value.toLowerCase();
    const min = Number(document.getElementById('minPrice').value || 0);
    const max = Number(document.getElementById('maxPrice').value || Infinity);

    const filtered = productsData.filter(p => {
      const name = p.name.toLowerCase();
      const price = Number(p.price);

      return name.includes(search) && price >= min && price <= max;
    });

    renderProducts(filtered);
  }

  async function showDetails(id){
    const { data: p } = await _supabase.from('products').select('*').eq('id', id).single();
    if(!p) return;

    showPage('product-details');
    const container = document.getElementById('detail-content');
    container.innerHTML = `
      <div class="detail-grid">
        <img src="${SUPABASE_URL}/storage/v1/object/public/${PRODUCT_BUCKET}/${p.image_path}" style="width: 100%; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
        <div>
          <span style="color:var(--gold); font-weight:bold;">${p.category}</span>
          <h1 style="margin:10px 0;">${p.name}</h1>
          <h2 style="color:var(--dark);">RS. ${Number(p.price).toLocaleString()}</h2>
          <p style="color:#666; line-height:1.6; margin: 20px 0;">Premium handcrafted item. Exclusive design available only at NOOR CENTER Kabirwala.</p>
          <button class="btn" style="width: auto; padding: 15px 40px;" onclick="addToCart('${p.id}', '${p.name}', ${p.price}, '${p.image_path}')">Add to Cart</button>
        </div>
      </div>
    `;
  }

  function addToCart(id, name, price, img){
    cart.push({id, name, price, img});
    localStorage.setItem('noor_cart', JSON.stringify(cart));
    updateCartUI();
    alert('Item added to cart!');
  }

  function updateCartUI(){
    document.getElementById('cart-count').innerText = `üõí Cart (${cart.length})`;
    document.getElementById('mobileCart').innerText = `üõí Cart (${cart.length})`;
  }

  function renderCart(){
    const list = document.getElementById('cart-items-list');
    let total = 0;
    if(cart.length === 0){
      list.innerHTML = "<p>Your cart is empty.</p>";
      return;
    }

    list.innerHTML = cart.map((item, index) => {
      total += item.price;
      return `<div class="cart-item">
        <img src="${SUPABASE_URL}/storage/v1/object/public/${PRODUCT_BUCKET}/${item.img}">
        <div style="flex-grow:1; margin-left:15px;"><b>${item.name}</b><br>RS. ${item.price}</div>
        <button onclick="removeItem(${index})" style="color:red; background:none; border:none; cursor:pointer;">Remove</button>
      </div>`;
    }).join('');

    document.getElementById('cart-total').innerText = `Total: RS. ${total}`;
  }

  function removeItem(index){
    cart.splice(index, 1);
    localStorage.setItem('noor_cart', JSON.stringify(cart));
    renderCart();
    updateCartUI();
  }

  async function placeOrder(){
    const name = document.getElementById('custName').value;
    if(!name || cart.length === 0) return alert('Fill details and check cart');

    const orderData = {
      customer_name: name,
      phone: document.getElementById('custPhone').value,
      address: document.getElementById('custAddr').value,
      items: cart,
      total_price: cart.reduce((s, i) => s + i.price, 0)
    };

    const { error } = await _supabase.from('orders').insert([orderData]);
    if(!error){
      alert('Order Success!');
      cart = [];
      localStorage.removeItem('noor_cart');
      showPage('home');
    }
  }

  function adminLogin(){
    if(document.getElementById('admUser').value === 'noorcenter' &&
      document.getElementById('admPass').value === 'noor123'){
      showPage('admin-dash');
    } else alert('Denied');
  }

  async function uploadProduct(){
    const file = document.getElementById('pImage').files[0];
    if(!file) return alert('Choose image!');
    const fileName = `${Date.now()}_${file.name}`;
    await _supabase.storage.from(PRODUCT_BUCKET).upload(fileName, file);
    await _supabase.from('products').insert([{
      id_admin: document.getElementById('pId').value,
      name: document.getElementById('pName').value,
      price: document.getElementById('pPrice').value,
      category: document.getElementById('pCat').value,
      image_path: fileName
    }]);
    alert('Added!');
    loadAdminProducts();
  }

  async function loadAdminProducts(){
    const { data } = await _supabase.from('products').select('*');
    document.getElementById('admin-product-list').innerHTML =
      `<table><tr><th>ID</th><th>Name</th><th>Action</th></tr>` +
      data.map(p => `<tr><td>${p.id_admin}</td><td>${p.name}</td><td><button onclick="deleteProd('${p.id}')">Delete</button></td></tr>`).join('') +
      `</table>`;
  }

  async function deleteProd(id){
    await _supabase.from('products').delete().eq('id', id);
    loadAdminProducts();
  }

  // Ensure cart UI updates on page load
  updateCartUI();
</script>

</body>
</html>
